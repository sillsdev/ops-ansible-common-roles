---

- name: "Authprogs Install Pre-requisites | Python 3"
  apt: 
    package: python3-pip
    update_cache: yes
  when: 'hostvars[inventory_hostname].ansible_python_interpreter is defined and "python3" in hostvars[inventory_hostname].ansible_python_interpreter'

- name: "Authprogs Install Pre-requisites - apt | Python 2"
  apt: 
    name: "{{ packages }}"
    update_cache: yes
  vars:
    packages:
    - python-pip
    - python-virtualenv
    - python-setuptools
  when: 'hostvars[inventory_hostname].ansible_python_interpreter is not defined'
- name: "Authprogs Install Pre-requisites - pip | Python 2"
  pip: 
    name: "{{ packages }}"
    state: latest
  vars:
    packages:
    - pip
    - virtualenv
    - setuptools
  when: 'hostvars[inventory_hostname].ansible_python_interpreter is not defined'

- name: "Authprogs Install"
  pip:
    name: authprogs
